<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>A-Frame Ambiance Sombre</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
</head>
<body>
<a-scene
        fog="type: exponential; color: #0D0D1A; density: 0.2"
        vr-mode-ui="enabled: true"
        embedded>

    <!-- Lumière ambiante très faible -->
    <a-light type="ambient" color="#F8D34E" intensity="0.3"></a-light>

    <!-- Lumière sous le lampadaire -->
    <a-light type="point" intensity="2" distance="5" position="2.48023 2.5 -0.30464" light="color: red"></a-light>
    <a-light type="point" intensity="2" distance="5" position="-1.98152 2.5 -0.30464" light="color: #6be99f"></a-light>

    <!-- Caméra avec contrôles de mouvement -->
    <a-entity id="rig" movement-controls position="0 1.6 0">
        <a-camera wasd-controls look-controls>
            <!-- Ajout de contrôleurs VR -->
            <a-entity oculus-touch-controls="hand: left"></a-entity>
            <a-entity oculus-touch-controls="hand: right"></a-entity>
        </a-camera>
    </a-entity>

    <!-- Sol avec collision -->
    <a-plane position="0 0 0" rotation="-90 0 0" width="10" height="10" color="#333" scale="2 1 1" static-body></a-plane>

    <!-- Modèles 3D alignés -->
    <a-entity gltf-model="models/busStop.glb" scale="0.1 0.1 0.1" position="2.2268 0 1"></a-entity>
    <a-entity gltf-model="models/banc.glb" position="1.13041 0.4 -0.78492" rotation="1 90 0" scale="0.5 0.5 0.5"></a-entity>
    <a-entity gltf-model="models/banc.glb" position="-1.13041 0.4 -0.78492" rotation="1 90 0" scale="0.5 0.5 0.5"></a-entity>
    <a-entity gltf-model="models/lampadaire.glb" position="-2.1411 3 -0.30464" rotation="0.05 270 0" scale="1.2 1.2 1.2"></a-entity>
    <a-entity gltf-model="models/lampadaire.glb" position="2.7267 3 -0.30464" rotation="0.05 90 0" scale="1.2 1.2 1.2"></a-entity>

    <!-- Ciel sombre -->
    <a-sky color="#0D0D1A"></a-sky>
</a-scene>

<script>
    // S'assurer que le mode VR est activé
    document.querySelector('a-scene').addEventListener('loaded', () => {
        console.log('Scene loaded and ready for VR');

        // Forcer l'activation du mode VR si disponible
        const scene = document.querySelector('a-scene');
        if (scene && scene.enterVR) {
            scene.enterVR();
        } else {
            console.warn('VR mode not supported or not available.');
        }
    });
</script>
</body>
</html>
